{"version":3,"sources":["../../../src/utils/findUp.ts"],"sourcesContent":["import path from 'path';\nimport resolveFrom from 'resolve-from';\n\nimport { CommandError } from '../utils/errors';\n\n/** Look up directories until one with a `package.json` can be found, assert if none can be found. */\nexport function findUpProjectRootOrAssert(cwd: string): string {\n  const projectRoot = findUpProjectRoot(cwd);\n  if (!projectRoot) {\n    throw new CommandError(`Project root directory not found (working directory: ${cwd})`);\n  }\n  return projectRoot;\n}\n\nfunction findUpProjectRoot(cwd: string): string | null {\n  if (['.', path.sep].includes(cwd)) return null;\n\n  const found = resolveFrom.silent(cwd, './package.json');\n  if (found) {\n    return path.dirname(found);\n  }\n  return findUpProjectRoot(path.dirname(cwd));\n}\n\n/**\n * Find a file in the (closest) parent directories.\n * This will recursively look for the file, until the root directory is reached.\n */\nexport function findFileInParents(cwd: string, fileName: string): string | null {\n  if (['.', path.sep].includes(cwd)) return null;\n\n  const found = resolveFrom.silent(cwd, `./${fileName}`);\n  if (found) return found;\n\n  return findFileInParents(path.dirname(cwd), fileName);\n}\n"],"names":["findUpProjectRootOrAssert","findFileInParents","cwd","projectRoot","findUpProjectRoot","CommandError","path","sep","includes","found","resolveFrom","silent","dirname","fileName"],"mappings":"AAAA;;;;;;;;;;;IAMgBA,yBAAyB,MAAzBA,yBAAyB;IAsBzBC,iBAAiB,MAAjBA,iBAAiB;;;8DA5BhB,MAAM;;;;;;;8DACC,cAAc;;;;;;wBAET,iBAAiB;;;;;;AAGvC,SAASD,yBAAyB,CAACE,GAAW,EAAU;IAC7D,MAAMC,WAAW,GAAGC,iBAAiB,CAACF,GAAG,CAAC,AAAC;IAC3C,IAAI,CAACC,WAAW,EAAE;QAChB,MAAM,IAAIE,OAAY,aAAA,CAAC,CAAC,qDAAqD,EAAEH,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,CAAC;IACD,OAAOC,WAAW,CAAC;AACrB,CAAC;AAED,SAASC,iBAAiB,CAACF,GAAW,EAAiB;IACrD,IAAI;QAAC,GAAG;QAAEI,KAAI,EAAA,QAAA,CAACC,GAAG;KAAC,CAACC,QAAQ,CAACN,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC;IAE/C,MAAMO,KAAK,GAAGC,YAAW,EAAA,QAAA,CAACC,MAAM,CAACT,GAAG,EAAE,gBAAgB,CAAC,AAAC;IACxD,IAAIO,KAAK,EAAE;QACT,OAAOH,KAAI,EAAA,QAAA,CAACM,OAAO,CAACH,KAAK,CAAC,CAAC;IAC7B,CAAC;IACD,OAAOL,iBAAiB,CAACE,KAAI,EAAA,QAAA,CAACM,OAAO,CAACV,GAAG,CAAC,CAAC,CAAC;AAC9C,CAAC;AAMM,SAASD,iBAAiB,CAACC,GAAW,EAAEW,QAAgB,EAAiB;IAC9E,IAAI;QAAC,GAAG;QAAEP,KAAI,EAAA,QAAA,CAACC,GAAG;KAAC,CAACC,QAAQ,CAACN,GAAG,CAAC,EAAE,OAAO,IAAI,CAAC;IAE/C,MAAMO,KAAK,GAAGC,YAAW,EAAA,QAAA,CAACC,MAAM,CAACT,GAAG,EAAE,CAAC,EAAE,EAAEW,QAAQ,CAAC,CAAC,CAAC,AAAC;IACvD,IAAIJ,KAAK,EAAE,OAAOA,KAAK,CAAC;IAExB,OAAOR,iBAAiB,CAACK,KAAI,EAAA,QAAA,CAACM,OAAO,CAACV,GAAG,CAAC,EAAEW,QAAQ,CAAC,CAAC;AACxD,CAAC"}